<!doctype html>
<html lang="pt-BR" class="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Siga a Receita - Deluxe Chef! v6 (Modular)</title>

  <!-- Tailwind config + CDN -->
  <script>
    tailwind = { config: { darkMode: 'class' } };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- Tone.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">

  <meta name="description" content="Siga a Receita - Deluxe Chef (modular refactor)" />

  <style>
    /* THEME VARIABLES (expanded ~3x) */
    :root{
      /* Light Theme VIBRANT */
      --bg-grad:linear-gradient(135deg,#e0f2fe 0%,#f0f9ff 100%); /* Light Blue/Sky */
      --glass:rgba(255,255,255,.9);
      --panel-bg:rgba(255,255,255,.98);
      --panel-border:rgba(0,0,0,0.1);
      --text-primary:#0f172a;
      --text-secondary:#334155;
      --accent:#8b5cf6; /* Indigo/Purple */
      --accent-2:#10b981; /* Emerald */
      --danger:#ef4444; /* Red */
      --success:#22c55e; /* Green */
      --muted:#f1f5f9; /* Slate 100 */
      --muted-2:#e2e8f0; /* Slate 200 */
      --ring:#a78bfa;
      --shadow:0 12px 25px rgba(0,0,0,0.15);
      --bubble-bg:#ffffff;
      --bubble-border:#d1d5db;
      --timer-grad:linear-gradient(90deg,#ef4444,#fb923c);
      --modal-scrim:rgba(0,0,0,0.8);
      --img-size:1.3em;
    }
    html.dark{
      /* Dark Theme VIBRANT */
      --bg-grad:linear-gradient(135deg,#0c0a09 0%,#1c1917 100%); /* Stone/Black */
      --glass:rgba(25,30,45,.75);
      --panel-bg:rgba(20,20,25,.9);
      --panel-border:rgba(255,255,255,0.1);
      --text-primary:#f8fafc;
      --text-secondary:#cbd5e1;
      --accent:#a78bfa; /* Violet */
      --accent-2:#34d399; /* Emerald */
      --danger:#fca5a5; /* Red */
      --success:#4ade80; /* Green */
      --muted:#27272a; /* Zinc 800 */
      --muted-2:#3f3f46; /* Zinc 700 */
      --ring:#c4b5fd;
      --shadow:0 12px 30px rgba(0,0,0,0.6);
      --bubble-bg:#1f2937;
      --bubble-border:#374151;
      --timer-grad:linear-gradient(90deg,#f43f5e,#f59e0b);
      --modal-scrim:rgba(0,0,0,0.9);
    }

    html,body,#app{height:100%}
    body{
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:var(--bg-grad);
      margin:0; overflow:hidden;
      color:var(--text-primary);
      transition:background .5s ease, color .3s ease; /* Increased transition time */
    }
    .no-select{user-select:none;-webkit-user-select:none}

    /* MOBILE-FOCUSED CONTAINER OVERRIDES */
    #game-container{
      background:var(--panel-bg)!important;
      border:1px solid var(--panel-border)!important;
      box-shadow:var(--shadow);
      animation:containerPop .4s cubic-bezier(0.175, 0.885, 0.32, 1.275) both; /* Bouncy entry */
    }
    @keyframes containerPop{from{transform:translateY(20px) scale(.95); opacity:0}to{transform:translateY(0) scale(1); opacity:1}}

    /* Screen entry animation */
    .screen-enter{ animation:screenFade .4s ease-out both } /* Slower/smoother transition */
    @keyframes screenFade{ from{ opacity:0; transform:translateY(10px) } to{ opacity:1; transform:translateY(0) } }

    .screen{
      color:var(--text-primary);
    }
    header, footer{
      background:var(--panel-bg)!important;
      border-color:var(--panel-border)!important;
      color:var(--text-primary)!important;
      transition:background .3s ease, color .2s ease, border-color .3s ease;
    }

    /* Buttons */
    .btn-main{
      transform:translateZ(0);
      transition:transform .15s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow .2s ease, background .2s ease, color .2s ease, border-color .2s ease, opacity .15s ease;
      will-change:transform, box-shadow;
      border:1px solid transparent;
      box-shadow:0 6px 15px rgba(0,0,0,0.12); /* Increased shadow */
    }
    .btn-main:hover{ transform:scale(1.03) }
    .btn-main:active{ transform:scale(.95); box-shadow:0 3px 8px rgba(0,0,0,0.1) }
    .btn-theme{
      background:var(--muted)!important;
      color:var(--text-primary)!important;
      border:1px solid var(--panel-border)!important;
      transition:background .2s ease,color .2s ease,border-color .2s ease, transform .1s ease;
    }
    .btn-theme:active { transform: scale(0.9) }

    /* Speech bubble */
    .speech-bubble{
      background:var(--bubble-bg)!important;
      border:1px solid var(--bubble-border)!important;
      border-radius:20px; /* Softer edges */
      padding:1rem;
      position:relative;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      transition:transform .15s ease;
    }
    .speech-bubble:hover{ transform:translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.1) }

    /* Timer bar - add slight elevation */
    #timer-bar-inner{
      background:var(--timer-grad)!important;
      box-shadow:0 2px 5px rgba(0,0,0,0.2);
    }

    /* Modals */
    #market-message-modal,
    #confirm-reset-modal,
    #rank-up-modal,
    #pause-modal{
      background:var(--modal-scrim)!important;
      backdrop-filter:blur(4px);
      animation:fadeIn .2s ease both;
    }
    @keyframes fadeIn{ from{ opacity:0 } to{ opacity:1 } }

    #market-message-content,
    #rank-up-modal .bg-white,
    #confirm-reset-modal .bg-white,
    #pause-modal .card{
      background:var(--panel-bg)!important;
      color:var(--text-primary)!important;
      border:1px solid var(--panel-border)!important;
      animation:modalPop .3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    }
    @keyframes modalPop{ from{ transform:scale(0.8); opacity:0 } to{ transform:scale(1); opacity:1 } }
    
    /* Success/Failure Modal Animation */
    #success-modal, #failure-modal {
      animation: slideInUp .4s cubic-bezier(0.175, 0.885, 0.32, 1.275) both, fadeOut .3s 1s ease forwards;
      opacity: 0;
      position: absolute;
      flex-direction: column;
    }
    @keyframes slideInUp {
      0% { transform: translateY(100%); opacity: 0; }
      50% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(0); opacity: 1; }
    }
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }


    /* Ingredient btn */
    .ingredient-btn{
      background:var(--bubble-bg)!important;
      border:1px solid var(--bubble-border)!important;
      transition:transform .1s ease, box-shadow .2s ease, opacity .12s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .ingredient-btn:hover{ transform:scale(1.08); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .ingredient-btn:active{ transform:scale(.95) }

    /* Recipe steps */
    .recipe-step{ 
      display:inline-flex; align-items:center; gap:.4rem; padding:.35rem .65rem; background:var(--muted-2); 
      border-radius:.75rem; margin:.2rem; border:1px solid var(--panel-border); 
      transition:background .2s ease, transform .2s ease; 
      font-size: 1.1em; /* slightly larger */
    }
    .recipe-step.correct{ 
      outline:3px solid var(--success); 
      background: rgba(34, 197, 94, 0.1);
      box-shadow:0 0 0 4px rgba(34, 197, 94,.2); 
      animation: stepSuccess .3s ease;
    }
    @keyframes stepSuccess {
        0% { transform: scale(0.9); opacity: 0.5; }
        100% { transform: scale(1); opacity: 1; }
    }

    /* Consistent emoji & image sizing */
    .ing-img{ width:var(--img-size); height:var(--img-size); object-fit:contain; display:inline-block; vertical-align:middle; }

    /* Market tabs */
    .tabbar{ display:flex; gap:.5rem; padding:.25rem; background:var(--bubble-bg); border:1px solid var(--bubble-border); border-radius:1rem; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    .tab{ flex:1; text-align:center; padding:.6rem .8rem; border-radius:.75rem; font-weight:700; border:1px solid transparent; transition:background .2s ease, color .2s ease, border-color .2s ease, transform .12s ease; }
    .tab:hover{ transform:scale(1.01) }
    .tab.active{ 
      background:var(--accent); 
      color:white; 
      border-color:var(--accent); 
      box-shadow: 0 4px 10px rgba(139, 92, 246, 0.3); 
      transform:scale(1.02);
    }

    /* Money pill */
    .money-pill{ background:var(--accent-2)!important; color:#fff!important; transition:transform .15s ease, box-shadow .2s ease; }
    .money-pill:hover{ transform:scale(1.05) }
    .money-pill.scale-110{ transform:scale(1.15); box-shadow: 0 6px 15px rgba(0,0,0,0.2); } /* Enhanced pop animation */

    /* NPC emoji size and subtle hover */
    #npc-display{ 
      font-size: 8rem; /* Larger NPC */
      filter:drop-shadow(0 10px 15px rgba(0,0,0,.2)); 
      transition:transform .2s ease; 
    }
    #npc-display:hover{ transform:scale(1.05) rotate(-1deg); }

    /* Rush hour banner */
    #rush-hour-banner{ 
      background: linear-gradient(90deg, #f97316, #ef4444); /* Orange to Red gradient */
      box-shadow: 0 0 10px #f97316;
      animation: bannerSlideDown .5s cubic-bezier(0.68, -0.55, 0.265, 1.55) both 0.1s, bannerPulse 1.5s ease 0.6s infinite alternate; 
      font-size: 1.1em;
    }
    @keyframes bannerSlideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }
    @keyframes bannerPulse{ 
      0%{ opacity:.8; box-shadow: 0 0 8px rgba(249, 115, 22, 0.8) } 
      100%{ opacity:1; box-shadow: 0 0 15px rgba(249, 115, 22, 1.0) } 
    }

    /* Accessibility focus rings */
    :focus-visible{ outline:none; box-shadow:0 0 0 4px var(--ring) inset, 0 0 0 4px var(--ring); border-radius:.75rem; }

    /* Utility animations */
    .animate-chef-wave{ animation:chefWave 1.2s ease infinite }
    @keyframes chefWave{ 0%{ transform:rotate(0deg) } 50%{ transform:rotate(8deg) } 100%{ transform:rotate(0deg) } }

    .card{
      background:var(--panel-bg)!important;
      border:1px solid var(--panel-border)!important;
      box-shadow:var(--shadow);
      transition:transform .15s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease;
    }
    .card:hover{ transform:scale(1.01); box-shadow: 0 15px 35px rgba(0,0,0,0.18); }
    
    /* Streak display */
    #streak-display.animate-pulse {
        animation: streakPop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
        color: #ff8c00; /* Deep orange */
        font-size: 1.2em;
        text-shadow: 0 0 5px rgba(255, 140, 0, 0.5);
    }
    @keyframes streakPop {
        0% { transform: scale(1.0); }
        50% { transform: scale(1.4); }
        100% { transform: scale(1.0); }
    }

    #loading-screen{
      background: var(--bg-grad);
      transition: opacity 0.5s ease;
      z-index: 9999;
    }
    .fade-out {
      opacity: 0 !important;
      pointer-events: none;
    }
  </style>
</head>
<body class="no-select">
  <!-- Loading Screen -->
  <div id="loading-screen" class="fixed inset-0 flex flex-col items-center justify-center">
    <i class="fas fa-spinner fa-spin text-6xl text-purple-600 mb-4"></i>
    <h1 class="text-2xl font-bold font-black" style="color:var(--text-primary)">Carregando Cozinha...</h1>
  </div>

  <div id="app" class="w-full h-full flex items-center justify-center">
    <main class="flex-1 p-3 overflow-y-auto w-full space-y-3 min-h-0">
      <div class="tabbar">
        <div class="tab active">Market</div>
        <div class="tab">Recipes</div>
        <div class="tab">Inventory</div>
        <div class="tab">Stats</div>
      </div>
    </main>
  </div>

  <!-- App modules -->
  <script type="module" src="./data.js"></script>
  <script type="module" src="./audio.js"></script>
  <script type="module" src="./ui.js"></script>
  <script type="module" src="./app.js"></script>

  
</body>
</html>
